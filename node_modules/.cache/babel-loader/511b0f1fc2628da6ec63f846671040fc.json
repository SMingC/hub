{"ast":null,"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.error.cause.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nexports.getPagination = getPagination;\n\nfunction getPagination(response) {\n  var links = response.headers.get(\"Link\");\n  var pagination = {}; //var link, url, rel, m, page;\n\n  if (links == null) {\n    return null;\n  }\n\n  links = links.split(\",\");\n  var total = response.headers.get(\"X-Total-Count\");\n\n  for (var i = 0, len = links.length; i < len; i++) {\n    var link = links[i].replace(/(^\\s*|\\s*$)/, \"\");\n\n    var _link$split = link.split(\";\"),\n        _link$split2 = _slicedToArray(_link$split, 2),\n        url = _link$split2[0],\n        rel = _link$split2[1];\n\n    var m = url.match(/page=(\\d+)/);\n    var page = m && parseInt(m[1], 10);\n\n    if (rel.match(/last/)) {\n      pagination.last = page;\n    } else if (rel.match(/next/)) {\n      pagination.next = page;\n    } else if (rel.match(/prev/)) {\n      pagination.prev = page;\n    } else if (rel.match(/first/)) {\n      pagination.first = page;\n    }\n  }\n\n  pagination.last = Math.max(pagination.last || 0, pagination.prev && pagination.prev + 1 || 0);\n  pagination.current = pagination.next ? pagination.next - 1 : pagination.last || 1;\n  pagination.total = total ? parseInt(total, 10) : null;\n  return pagination;\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","undefined","_i","Symbol","iterator","_s","next","done","push","length","err","Array","isArray","TypeError","getPagination","response","links","headers","get","pagination","split","total","len","link","replace","_link$split","_link$split2","url","rel","m","match","page","parseInt","last","prev","first","Math","max","current"],"sources":["/Users/smc/Documents/200hub/node_modules/micro-api-client/lib/pagination.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nexports.getPagination = getPagination;\nfunction getPagination(response) {\n  var links = response.headers.get(\"Link\");\n  var pagination = {};\n  //var link, url, rel, m, page;\n  if (links == null) {\n    return null;\n  }\n  links = links.split(\",\");\n  var total = response.headers.get(\"X-Total-Count\");\n\n  for (var i = 0, len = links.length; i < len; i++) {\n    var link = links[i].replace(/(^\\s*|\\s*$)/, \"\");\n\n    var _link$split = link.split(\";\"),\n        _link$split2 = _slicedToArray(_link$split, 2),\n        url = _link$split2[0],\n        rel = _link$split2[1];\n\n    var m = url.match(/page=(\\d+)/);\n    var page = m && parseInt(m[1], 10);\n    if (rel.match(/last/)) {\n      pagination.last = page;\n    } else if (rel.match(/next/)) {\n      pagination.next = page;\n    } else if (rel.match(/prev/)) {\n      pagination.prev = page;\n    } else if (rel.match(/first/)) {\n      pagination.first = page;\n    }\n  }\n\n  pagination.last = Math.max(pagination.last || 0, pagination.prev && pagination.prev + 1 || 0);\n  pagination.current = pagination.next ? pagination.next - 1 : pagination.last || 1;\n  pagination.total = total ? parseInt(total, 10) : null;\n\n  return pagination;\n}"],"mappings":"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"},"metadata":{},"sourceType":"script"}