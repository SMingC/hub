{"ast":null,"code":"import RequestAccount from \"@/components/group/signIn/RequestAccount.vue\";\nimport ThemeSwitch from \"@/components/button/ThemeSwitch.vue\";\nimport Notification from \"@/components/iframes/logOutAlert/Notification.vue\";\nimport Header from \"@/components/Headers/Header.vue\";\nimport LoadingCard from \"@/components/iframes/logOutAlert/LoadingCard.vue\";\nimport { auth } from \"@/main\";\nexport default {\n  name: \"SignIn\",\n  components: {\n    RequestAccount,\n    ThemeSwitch,\n    Notification,\n    Header,\n    LoadingCard\n  },\n\n  data() {\n    return {\n      email: null,\n      password: null,\n      hasText: false,\n      text: \"\"\n    };\n  },\n\n  computed: {\n    isDarkMode() {\n      return this.$store.getters.isDarkMode;\n    }\n\n  },\n  methods: {\n    onSubmit() {\n      const email = this.email;\n      const password = this.password;\n      this.hasText = false;\n      this.$refs.Load.showLoading();\n      this.$refs.Blur.style.display = \"block\";\n      auth.login(email, password, true).then(res => {\n        console.log(\"===sigin success ===\", res);\n        sessionStorage.setItem(\"email\", email);\n        this.$refs.Load.shoutDown();\n        this.$refs.Blur.style.display = \"none\";\n        this.$notify({\n          title: \"登陆成功\",\n          message: \"正在为你退出\",\n          type: \"success\"\n        });\n        this.$router.go(-1);\n      }).catch(err => {\n        console.log(\"===bad sigin\", err);\n        this.$refs.Load.shoutDown();\n        this.$refs.Blur.style.display = \"none\";\n        this.hasText = true;\n        this.text = \"废废了，账号/密码错了，建议重置☟\";\n      });\n    }\n\n  },\n\n  mounted() {\n    const params = this.$route.params;\n\n    if (params.userLoggedOut) {\n      this.hasText = true;\n      this.text = \"一曲离歌两行泪，不知何地再逢君👋🏿\";\n    } else if (params.userRecoveredAccount) {\n      this.hasText = true;\n      this.text = `恢复邮件已发送给${params.email}，自己等去吧`;\n    } else if (params.userRequestedAccount) {\n      this.hasText = true;\n      this.text = `你的请求已经发送给管理员，慢慢等吧`;\n    }\n  }\n\n};","map":{"version":3,"mappings":"AAgDA;AACA;AACA;AACA;AACA;AAEA;AAEA;EACAA,cADA;EAEAC;IACAC,cADA;IAEAC,WAFA;IAGAC,YAHA;IAIAC,MAJA;IAKAC;EALA,CAFA;;EASAC;IACA;MACAC,WADA;MAEAC,cAFA;MAGAC,cAHA;MAIAC;IAJA;EAMA,CAhBA;;EAiBAC;IACAC;MACA;IACA;;EAHA,CAjBA;EAsBAC;IACAC;MACA;MACA;MACA;MAEA;MACA;MAEAC,KACAC,KADA,CACAT,KADA,EACAC,QADA,EACA,IADA,EAEAS,IAFA,CAEAC;QACAC;QACAC;QACA;QACA;QACA;UACAC,aADA;UAEAC,iBAFA;UAGAC;QAHA;QAKA;MACA,CAbA,EAcAC,KAdA,CAcAC;QACAN;QACA;QACA;QACA;QACA;MACA,CApBA;IAqBA;;EA9BA,CAtBA;;EAsDAO;IACA;;IAEA;MACA;MACA;IACA,CAHA,MAGA;MACA;MACA;IACA,CAHA,MAGA;MACA;MACA;IACA;EACA;;AAnEA","names":["name","components","RequestAccount","ThemeSwitch","Notification","Header","LoadingCard","data","email","password","hasText","text","computed","isDarkMode","methods","onSubmit","auth","login","then","res","console","sessionStorage","title","message","type","catch","err","mounted"],"sourceRoot":"src/views","sources":["SignIn.vue"],"sourcesContent":["<template>\n  <div>\n    <Header />\n    <div\n      class=\"container\"\n      :class=\"{\n        'light-background': !isDarkMode,\n        'dark-background': isDarkMode,\n      }\"\n    >\n      <div ref=\"Blur\" id=\"pop\" style=\"display: none\"></div>\n      <LoadingCard ref=\"Load\" style=\"display: none\" class=\"onPhoneLoaing\" />\n      <Notification v-if=\"hasText\" :text=\"text\" />\n      <RequestAccount />\n      <div class=\"login\">\n        <img src=\"@/assets/svg/DCHQ.svg\" v-show=\"isDarkMode\" />\n        <img src=\"@/assets/svg/DCHQ-dark.svg\" v-show=\"!isDarkMode\" />\n        <h4 :class=\"{ 'light-text': isDarkMode, 'dark-text': !isDarkMode }\">\n          登录到 NCHU_200hub\n        </h4>\n        <form @submit.prevent=\"onSubmit\">\n          <input\n            type=\"email\"\n            placeholder=\"邮箱\"\n            :class=\"{ 'light-field': isDarkMode, 'dark-field': !isDarkMode }\"\n            v-model=\"email\"\n            required\n          />\n          <input\n            type=\"password\"\n            placeholder=\"密码\"\n            :class=\"{ 'light-field': isDarkMode, 'dark-field': !isDarkMode }\"\n            v-model=\"password\"\n            required\n          />\n          <button style=\"cursor: pointer\">Sign In</button>\n        </form>\n        <router-link\n          to=\"/recover\"\n          :class=\"{ 'light-link': isDarkMode, 'dark-link': !isDarkMode }\"\n          >哟，又忘密码了</router-link\n        >\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport RequestAccount from \"@/components/group/signIn/RequestAccount.vue\";\nimport ThemeSwitch from \"@/components/button/ThemeSwitch.vue\";\nimport Notification from \"@/components/iframes/logOutAlert/Notification.vue\";\nimport Header from \"@/components/Headers/Header.vue\";\nimport LoadingCard from \"@/components/iframes/logOutAlert/LoadingCard.vue\";\n\nimport { auth } from \"@/main\";\n\nexport default {\n  name: \"SignIn\",\n  components: {\n    RequestAccount,\n    ThemeSwitch,\n    Notification,\n    Header,\n    LoadingCard,\n  },\n  data() {\n    return {\n      email: null,\n      password: null,\n      hasText: false,\n      text: \"\",\n    };\n  },\n  computed: {\n    isDarkMode() {\n      return this.$store.getters.isDarkMode;\n    },\n  },\n  methods: {\n    onSubmit() {\n      const email = this.email;\n      const password = this.password;\n      this.hasText = false;\n\n      this.$refs.Load.showLoading();\n      this.$refs.Blur.style.display = \"block\";\n\n      auth\n        .login(email, password, true)\n        .then((res) => {\n          console.log(\"===sigin success ===\", res);\n          sessionStorage.setItem(\"email\", email);\n          this.$refs.Load.shoutDown();\n          this.$refs.Blur.style.display = \"none\";\n          this.$notify({\n            title: \"登陆成功\",\n            message: \"正在为你退出\",\n            type: \"success\",\n          });\n          this.$router.go(-1);\n        })\n        .catch((err) => {\n          console.log(\"===bad sigin\", err);\n          this.$refs.Load.shoutDown();\n          this.$refs.Blur.style.display = \"none\";\n          this.hasText = true;\n          this.text = \"废废了，账号/密码错了，建议重置☟\";\n        });\n    },\n  },\n  mounted() {\n    const params = this.$route.params;\n\n    if (params.userLoggedOut) {\n      this.hasText = true;\n      this.text = \"一曲离歌两行泪，不知何地再逢君👋🏿\";\n    } else if (params.userRecoveredAccount) {\n      this.hasText = true;\n      this.text = `恢复邮件已发送给${params.email}，自己等去吧`;\n    } else if (params.userRequestedAccount) {\n      this.hasText = true;\n      this.text = `你的请求已经发送给管理员，慢慢等吧`;\n    }\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import \"@/global-styles/colors.scss\";\n@import \"@/global-styles/typography.scss\";\n.container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 100vh;\n  padding-top: 16px;\n  padding-bottom: 24px;\n  position: relative;\n}\n.onPhoneLoaing {\n  @media (max-width: 900px) {\n    transform: scale(0.9);\n  }\n}\n\n.login {\n  width: 400px;\n  text-align: center;\n  margin-left: 16px;\n  margin-right: 16px;\n}\n\n.github-container {\n  width: 100%;\n  display: flex;\n  justify-content: center;\n}\n#pop {\n  background: rgba(52, 58, 65, 0.6);\n  backdrop-filter: blur(4px);\n  -webkit-backdrop-filter: blur(4px);\n  position: fixed;\n  z-index: 10;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}